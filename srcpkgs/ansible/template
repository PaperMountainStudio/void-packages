# Template file for 'ansible'
pkgname=ansible
version=2.9.14
revision=1
build_style=python3-module
hostmakedepends="python3-setuptools"
depends="${hostmakedepends} python3-cryptography python3-Jinja2 python3-paramiko
 python3-yaml"
checkdepends="python3-pytest python3-devel python3-wheel python3-pip python3-mock python3-requests python3-Jinja2 python3-pytz python3-yaml python3-pexpect"
short_desc="Simple deployment, configuration management and execution framework"
maintainer="Michael Aldridge <maldridge@voidlinux.org>"
license="GPL-3.0-or-later"
homepage="https://www.ansible.com/"
distfiles="https://releases.ansible.com/ansible/${pkgname}-${version}.tar.gz"
checksum=efe7183e08f0c9dd9efd9124efa8978be62851b1e8eb856593a073538bfc6fb5

post_install() {
	vsconf examples/ansible.cfg
	vsconf examples/hosts
	for m in docs/man/man*/*.1; do
		vman ${m}
	done
}

do_check() {
	PYTHONPATH=$(pwd)/build/lib python3 -m pytest
}
